
@{
    ViewBag.Title = "Home Page";
    var i = 0;
    var user = Session["User"] as K22CNT4_TTCD1_DinhTienLuc.Models.User;
}

@section header {
    <header class="navbar navbar-light bg-white navbar-expand-sm navbar-toggle able-sm">
        <div class="container">
            <a href="@Url.Action("Index", "Sach", new { area = "" })" class="nav-link">
                <img src="~/Content/Images/sachLogo.png" alt="Home" class="logo" />
            </a>
            <div class="collapse navbar-collapse d-sm-inline-flex justify-content-center ">
                <ul class="navbar-nav flex-grow-1 d-flex justify-content-lg-center fh4">
                    <li>@Html.ActionLink("Trang chủ", "Index", "Sach", new { area = "" }, new { @class = "nav-link px-3" })</li>
                    <li>@Html.ActionLink("Tin Tức", "TinTuc", "Sach", new { area = "" }, new { @class = "nav-link px-3" })</li>
                    <li class="dropdown">
                        @Html.ActionLink("Loại sách", "Danhmuc", "DanhMucSach", new { area = "" }, new { @class = "nav-link px-3" })
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/DanhMucSach/Danhmuc">Sách tổng hợp</a></li>
                            <li><a class="dropdown-item" href="/DanhMucSach/VanHocHienDai">Văn học hiện đại</a></li>
                            <li><a class="dropdown-item" href="/DanhMucSach/KinhTeHoc">Kinh tế học</a></li>
                            <li><a class="dropdown-item" href="/DanhMucSach/TamLyHoc">Tâm lý học</a></li>
                        </ul>
                    </li>
                    <li>@Html.ActionLink("Liên hệ", "LienHe", "Sach", new { area = "" }, new { @class = "nav-link px-3" })</li>
                </ul>
            </div>
            <nav class="navbar navbar-light d-flex align-items-center">
                <div class="container">
                    <!-- Search bar -->
                    <!-- Search Form -->
                    <form class="d-flex me-3" onsubmit="return false;">
                        <input class="form-control me-2 searchInput" id="searchInput" type="search" placeholder="Search" aria-label="Search" />
                        <button class="btn btn-outline-warning" type="submit">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                    </form>

                    <!-- Search results container -->
                    <div id="searchResults" class="mt-3"></div>

                    @*Login and Register and Cart*@
                    <div class="d-flex justify-content-center align-items-center" style="height: 40px">
                        <div class="header-icons dropdown d-flex align-items-center">
                            <i class="fa-regular fa-user mx-3 fh4"></i>
                            <ul class="dropdown-menu">
                                @{
                                    @*Login and Register and Logout*@
                                    if (user == null)
                                    {

                                        <li><a class="dropdown-item" href="@Url.Action("Login", "Sach", new { area = "" })">Đăng nhập</a></li>
                                        <li><a class="dropdown-item" href="@Url.Action("Register", "Sach", new { area = "" })">Đăng ký</a></li>
                                    }
                                    else
                                    {
                                        <li><a class="dropdown-item" href="#">@user.Name</a></li>
                                        <li>
                                            <form action="/Sach/DangXuat" method="post">
                                                <button class="dropdown-item" type="submit">Đăng xuất</button>
                                            </form>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                        @*Cart*@
                        <a href="/Cart" class="header-icons d-flex align-items-center">
                            <i class="fa-solid fa-cart-shopping fh4 "><span id="numBooksInCart" class="numBooksInCart">0</span></i>
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </header>
}

<main>
    <section class="first-section" style=" background-image: url(//bizweb.dktcdn.net/100/363/455/themes/918830/assets/background-banner.jpg?1724988401192); }">
        <div class="container">
            <div class="row">
                @*Slider*@
                <div class="col-12 slider">
                    <div class="swiper mySwiper">
                        <div class="swiper-wrapper">
                            @foreach (var img in ViewBag.slide)
                            {
                                <div class="swiper-slide slide-item">
                                    <img src="@img.Images" alt="slide_@i" />
                                </div>
                                i++; // Tăng biến i
                            }
                        </div>
                    </div>

                </div>
                @*News artical*@
                <div class="d-list col-md-12 col-lg-12 col-xl-4 col-12 r-col">
                    <div class="item">
                        <div class="d-none">

                        </div>
                        <article class="item_blog_base">
                            <a class="thumb " href="/khong-can-phai-la-nha-kinh-te-hoc-moi-doc-duoc-economix" title="KHÔNG CẦN PHẢI LÀ NHÀ KINH TẾ HỌC MỚI ĐỌC ĐƯỢC ECONOMIX">
                                <img width="196" height="125" src="https://bizweb.dktcdn.net/100/363/455/articles/website-nn-36.png?v=1715855676690" data-src="https://bizweb.dktcdn.net/100/363/455/articles/website-nn-36.png?v=1715855676690" alt="KHÔNG CẦN PHẢI LÀ NHÀ KINH TẾ HỌC MỚI ĐỌC ĐƯỢC ECONOMIX" class="lazyload img-responsive loaded" data-was-processed="true">
                            </a>
                            <div class="content_blog">
                                <h3><a href="/khong-can-phai-la-nha-kinh-te-hoc-moi-doc-duoc-economix" title="KHÔNG CẦN PHẢI LÀ NHÀ KINH TẾ HỌC MỚI ĐỌC ĐƯỢC ECONOMIX" class="a-title">KHÔNG CẦN PHẢI LÀ NHÀ KINH TẾ HỌC MỚI ĐỌC ĐƯỢC ECONOMIX</a></h3>
                                <span>
                                    Thứ Năm,
                                    16/05/2024
                                </span>
                            </div>
                        </article>
                    </div>
                    <div class="item">
                        <div class="d-none">

                        </div>
                        <article class="item_blog_base">
                            <a class="thumb " href="/bat-tre-dong-xanh-khong-phai-cu-hit-dau-tien-cua-salinger" title="“BẮT TRẺ ĐỒNG XANH” KHÔNG PHẢI “CÚ HIT” ĐẦU TIÊN CỦA SALINGER">
                                <img width="196" height="125" src="https://bizweb.dktcdn.net/100/363/455/articles/website-nn-34.png?v=1715854106820" data-src="https://bizweb.dktcdn.net/100/363/455/articles/website-nn-34.png?v=1715854106820" alt="“BẮT TRẺ ĐỒNG XANH” KHÔNG PHẢI “CÚ HIT” ĐẦU TIÊN CỦA SALINGER" class="lazyload img-responsive loaded" data-was-processed="true">
                            </a>
                            <div class="content_blog">
                                <h3><a href="/bat-tre-dong-xanh-khong-phai-cu-hit-dau-tien-cua-salinger" title="“BẮT TRẺ ĐỒNG XANH” KHÔNG PHẢI “CÚ HIT” ĐẦU TIÊN CỦA SALINGER" class="a-title">“BẮT TRẺ ĐỒNG XANH” KHÔNG PHẢI “CÚ HIT” ĐẦU TIÊN CỦA SALINGER</a></h3>
                                <span>
                                    Thứ Năm,
                                    16/05/2024
                                </span>
                            </div>
                        </article>
                    </div>
                    <div class="item">
                        <div class="d-none">

                        </div>
                        <article class="item_blog_base">
                            <a class="thumb " href="/ten-cua-doa-hong-kho-tang-kien-thuc-ve-triet-hoc-ly-luan-ton-giao-lich-su-an-sau-mot-cot-truyen-trinh-tham-day-thach-thuc" title="Tên của đoá hồng: Kho tàng kiến thức về triết học, lý luận, tôn giáo, lịch sử ẩn sau một cốt truyện trinh thám đầy thách thức">
                                <img width="196" height="125" src="https://bizweb.dktcdn.net/100/363/455/articles/website-a-nh-da-i-die-n-ba-i-vie-t-17.png?v=1714815417920" data-src="https://bizweb.dktcdn.net/100/363/455/articles/website-a-nh-da-i-die-n-ba-i-vie-t-17.png?v=1714815417920" alt="Tên của đoá hồng: Kho tàng kiến thức về triết học, lý luận, tôn giáo, lịch sử ẩn sau một cốt truyện trinh thám đầy thách thức" class="lazyload img-responsive loaded" data-was-processed="true">
                            </a>
                            <div class="content_blog">
                                <h3><a href="/ten-cua-doa-hong-kho-tang-kien-thuc-ve-triet-hoc-ly-luan-ton-giao-lich-su-an-sau-mot-cot-truyen-trinh-tham-day-thach-thuc" title="Tên của đoá hồng: Kho tàng kiến thức về triết học, lý luận, tôn giáo, lịch sử ẩn sau một cốt truyện trinh thám đầy thách thức" class="a-title">Tên của đoá hồng: Kho tàng kiến thức về triết học, lý luận, tôn giáo, lịch sử ẩn sau một cốt truyện trinh thám đầy thách thức</a></h3>
                                <span>
                                    Thứ Bảy,
                                    04/05/2024
                                </span>
                            </div>
                        </article>
                    </div>
                    <div class="item">
                        <div class="d-none">

                        </div>
                        <article class="item_blog_base">
                            <a class="thumb " href="/5-bi-quyet-duong-am-dat-gia-cham-soc-da-hieu-qua-ngay-trong-mua-dong" title="5 bí quyết dưỡng ẩm đắt giá - Chăm sóc da hiệu quả ngay trong mùa đông">
                                <img width="196" height="125" src="https://bizweb.dktcdn.net/100/363/455/articles/seo-2.png?v=1700487959943" data-src="https://bizweb.dktcdn.net/100/363/455/articles/seo-2.png?v=1700487959943" alt="5 bí quyết dưỡng ẩm đắt giá - Chăm sóc da hiệu quả ngay trong mùa đông" class="lazyload img-responsive loaded" data-was-processed="true">
                            </a>
                            <div class="content_blog">
                                <h3><a href="/5-bi-quyet-duong-am-dat-gia-cham-soc-da-hieu-qua-ngay-trong-mua-dong" title="5 bí quyết dưỡng ẩm đắt giá - Chăm sóc da hiệu quả ngay trong mùa đông" class="a-title">5 bí quyết dưỡng ẩm đắt giá - Chăm sóc da hiệu quả ngay trong mùa đông</a></h3>
                                <span>
                                    Thứ Hai,
                                    20/11/2023
                                </span>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </section>
    @* MIX BOOK SECTION *@
    <section class="book-section">
        <div class="container">
            <div class="title-border">
                <h2 class="title-module">
                    <a href="/DanhMucSach/Danhmuc" title="Sách tổng hợp">Sách tổng hợp</a>
                </h2>
                <a class="link-more" title="xem thêm" href="/DanhMucSach/Danhmuc">Xem thêm <i class="fa-solid fa-arrow-right fh4 mx-1"></i></a>
            </div>
            @*Book slider*@
            <div class="swiper sw">
                <div class="swiper-wrapper slide-wrap" style="margin-right: -8px;">

                    @foreach (var item in ViewBag.mixBooks)
                    {
                        <div class="item_product_main swiper-slide">
                            <form action="/Sach/Details/@item.Id" method="post" class="variants">
                                <div class="thumb">
                                    <a class="image_thumb" href="/Sach/Details/@item.Id" title="@item.Name">
                                        <img width="199" height="199" src="@item.Images">
                                    </a>
                                    <div class="action-cart">
                                        <button type="button" class="btnAddToCart" data-id="@item.Id" title="Thêm vào giỏ">
                                            <i class="fa-solid fa-cart-shopping fh4"></i>
                                        </button>
                                        <input type="hidden" name="variantId" value="@item.Id">
                                        <button class="btn-buy btn-left btn-views  btn-buy-now-grid" title="Mua ngay">
                                            Mua ngay
                                        </button>
                                    </div>
                                </div>
                                <div class="info-product">
                                    <h3 class="product-name"><a href="/Sach/Details/@item.Id" title="@item.Name">@item.Name</a></h3>

                                    <div class="price-box">
                                        <span class="price">@item.Price.ToString("N0")₫</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    }
                </div>
                <button class="swiper-button-prev prev-btn"></button>
                <button class="swiper-button-next next-btn"></button>
            </div>
        </div>
    </section>

    @* Văn học hiện đại BOOK SECTION *@
    <section class="book-section">
        <div class="container">
            <div class="title-border">
                <h2 class="title-module">
                    <a href="/DanhMucSach/VanHocHienDai" title="Văn học hiện đại">Văn học hiện đại</a>
                </h2>
                <a class="link-more" title="xem thêm" href="/DanhMucSach/VanHocHienDai">Xem thêm <i class="fa-solid fa-arrow-right fh4 mx-1"></i></a>
            </div>
            @*Book slider*@
            <div class="swiper sw">
                <div class="swiper-wrapper slide-wrap" style=" margin-right: -8px;">
                    @foreach (var item in ViewBag.Vhhd)
                    {
                        <div class="item_product_main swiper-slide">
                            <form action="/Sach/Details/@item.Id" method="post" class="variants">
                                <div class="thumb">
                                    <a class="image_thumb" href="/Sach/Details/@item.Id" title="@item.Name">
                                        <img width="199" height="199" src="@item.Images">
                                    </a>
                                    <div class="action-cart">
                                        <button type="button" class="btnAddToCart" data-id="@item.Id" title="Thêm vào giỏ">
                                            <i class="fa-solid fa-cart-shopping fh4"></i>
                                        </button>
                                        <input type="hidden" name="variantId" value="125883119">
                                        <button class="btn-buy btn-left btn-views  btn-buy-now-grid" title="Mua ngay">
                                            Mua ngay
                                        </button>
                                    </div>
                                </div>
                                <div class="info-product">
                                    <h3 class="product-name"><a href="/Sach/Details/@item.Id" title="@item.Name">@item.Name</a></h3>

                                    <div class="price-box">
                                        <span class="price">@item.Price.ToString("N0")₫</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    }
                </div>
                <button class="swiper-button-prev prev-btn"></button>
                <button class="swiper-button-next next-btn"></button>
            </div>
        </div>
    </section>

    @*Sách kinh tế*@
    <section class="book-section">
        <div class="container">
            <div class="title-border">
                <h2 class="title-module">
                    <a href="/DanhMucSach/KinhTeHoc" title="Sách kinh tếp">Sách kinh tế</a>
                </h2>
                <a class="link-more" title="xem thêm" href="/DanhMucSach/KinhTeHoc">Xem thêm <i class="fa-solid fa-arrow-right fh4 mx-1"></i></a>
            </div>
            @*Book slider*@
            <div class="swiper sw">
                <div class="swiper-wrapper slide-wrap" style="margin-right: -8px;">
                    @foreach (var item in ViewBag.SachKt)
                    {
                        <div class="item_product_main swiper-slide">
                            <form action="/Sach/Details/@item.Id" method="post" class="variants">
                                <div class="thumb">
                                    <a class="image_thumb" href="/Sach/Details/@item.Id" title="@item.Name">
                                        <img width="199" height="199" src="@item.Images">
                                    </a>
                                    <div class="action-cart">
                                        <button type="button" class="btnAddToCart" data-id="@item.Id" title="Thêm vào giỏ">
                                            <i class="fa-solid fa-cart-shopping fh4"></i>
                                        </button>
                                        <input type="hidden" name="variantId" value="125883119">
                                        <button class="btn-buy btn-left btn-views  btn-buy-now-grid" title="Mua ngay">
                                            Mua ngay
                                        </button>
                                    </div>
                                </div>
                                <div class="info-product">
                                    <h3 class="product-name"><a href="/Sach/Details/@item.Id" title="@item.Name">@item.Name</a></h3>

                                    <div class="price-box">
                                        <span class="price">@item.Price.ToString("N0")₫</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    }
                </div>
                <button class="swiper-button-prev prev-btn"></button>
                <button class="swiper-button-next next-btn"></button>
            </div>
        </div>
    </section>

    @*Sách tâm lý học*@
    <section class="book-section">
        <div class="container">
            <div class="title-border">
                <h2 class="title-module">
                    <a href="/DanhMucSach/TamLyHoc" title="Sách tâm lý học">Sách tâm lý học</a>
                </h2>
                <a class="link-more" title="xem thêm" href="/DanhMucSach/TamLyHoc">Xem thêm <i class="fa-solid fa-arrow-right fh4 mx-1"></i></a>
            </div>
            @*Book slider*@
            <div class="swiper sw">
                <div class="swiper-wrapper slide-wrap" style="margin-right: -8px;">
                    @foreach (var item in ViewBag.SachTl)
                    {
                        <div class="item_product_main swiper-slide">
                            <form action="/Sach/Details/@item.Id" method="post" class="variants">
                                <div class="thumb">
                                    <a class="image_thumb" href="/Sach/Details/@item.Id" title="@item.Name">
                                        <img width="199" height="199" src="@item.Images">
                                    </a>
                                    <div class="action-cart">
                                        <button type="button" class="btnAddToCart" data-id="@item.Id" title="Thêm vào giỏ">
                                            <i class="fa-solid fa-cart-shopping fh4"></i>
                                        </button>
                                        <input type="hidden" name="variantId" value="125883119">
                                        <button class="btn-buy btn-left btn-views  btn-buy-now-grid" title="Mua ngay">
                                            Mua ngay
                                        </button>
                                    </div>
                                </div>
                                <div class="info-product">
                                    <h3 class="product-name"><a href="#" title="@item.Name">@item.Name</a></h3>

                                    <div class="price-box">
                                        <span class="price">@item.Price.ToString("N0")₫</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    }
                </div>
                <button class="swiper-button-prev prev-btn"></button>
                <button class="swiper-button-next next-btn"></button>
            </div>
        </div>
    </section>
</main>

@section scripts {
<!-- jQuery Script -->
<script>
    function searchBooks() {
        const query = $('#searchInput').val().trim();

        if (query.length > 0) {
            $.ajax({
                url: '@Url.Action("Search", "Sach")',
                method: 'GET',
                data: { query: query },
                success: function (result) {
                    $('#searchResults').html(result);
                },
                error: function () {
                    $('#searchResults').html('<p>Error loading results.</p>');
                }
            });
        } else {
            $('#searchResults').html(''); // Xóa kết quả khi thanh tìm kiếm trống
        }
    }

    // Bắt sự kiện input để xử lý cả khi bấm nút "X"
    $('#searchInput').on('input', searchBooks);
</script>
}